\documentclass[11pt]{article}

\usepackage[destlabel]{hyperref}
\usepackage[margin=1in,letterpaper]{geometry}

\usepackage{amsmath,amsbsy,amsfonts,amssymb,amsthm,color,dsfont,mleftright,commath}

\def\ddefloop#1{\ifx\ddefloop#1\else\ddef{#1}\expandafter\ddefloop\fi}

% \bfA, \bfB, ...
\def\ddef#1{\expandafter\def\csname bf#1\endcsname{\ensuremath{\mathbf{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\ddefloop

% \bfalpha, \bfbeta, ...,  \bfGamma, \bfDelta, ...,
\def\ddef#1{\expandafter\def\csname bf#1\endcsname{\ensuremath{\pmb{\csname #1\endcsname}}}}
\ddefloop {alpha}{beta}{gamma}{delta}{epsilon}{varepsilon}{zeta}{eta}{theta}{vartheta}{iota}{kappa}{lambda}{mu}{nu}{xi}{pi}{varpi}{rho}{varrho}{sigma}{varsigma}{tau}{upsilon}{phi}{varphi}{chi}{psi}{omega}{Gamma}{Delta}{Theta}{Lambda}{Xi}{Pi}{Sigma}{varSigma}{Upsilon}{Phi}{Psi}{Omega}{ell}\ddefloop

% \bbA, \bbB, ...
\def\ddef#1{\expandafter\def\csname bb#1\endcsname{\ensuremath{\mathbb{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop

% \cA, \cB, ...
\def\ddef#1{\expandafter\def\csname c#1\endcsname{\ensuremath{\mathcal{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop

% \vA, \vB, ..., \va, \vb, ...
\def\ddef#1{\expandafter\def\csname v#1\endcsname{\ensuremath{\boldsymbol{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\ddefloop

% \valpha, \vbeta, ...,  \vGamma, \vDelta, ...,
\def\ddef#1{\expandafter\def\csname v#1\endcsname{\ensuremath{\boldsymbol{\csname #1\endcsname}}}}
\ddefloop {alpha}{beta}{gamma}{delta}{epsilon}{varepsilon}{zeta}{eta}{theta}{vartheta}{iota}{kappa}{lambda}{mu}{nu}{xi}{pi}{varpi}{rho}{varrho}{sigma}{varsigma}{tau}{upsilon}{phi}{varphi}{chi}{psi}{omega}{Gamma}{Delta}{Theta}{Lambda}{Xi}{Pi}{Sigma}{varSigma}{Upsilon}{Phi}{Psi}{Omega}{ell}\ddefloop

\newcommand\Sig{\ensuremath{\varSigma}}
\newcommand\vSig{\ensuremath{\vvarSigma}}
\newcommand\veps{\ensuremath{\varepsilon}}
\newcommand\vveps{\ensuremath{\vvarepsilon}}
\newcommand\eps{\ensuremath{\epsilon}}

\renewcommand\t{{\ensuremath{\scriptscriptstyle{\top}}}}

\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Diag}{Diag}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\vol}{vol}

\DeclareMathOperator{\E}{\mathbb{E}}
\renewcommand{\P}{\ensuremath{\mathbb{P}}}
\DeclareMathOperator{\var}{var}
\DeclareMathOperator{\stddev}{stddev}
\DeclareMathOperator{\cov}{cov}

\DeclareMathOperator{\Bd}{bd}
\DeclareMathOperator{\Cl}{cl}
\DeclareMathOperator{\Conv}{conv}
\DeclareMathOperator{\Dom}{dom}
\DeclareMathOperator{\Epi}{epi}
\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\Null}{ker}
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\Range}{ran}
\DeclareMathOperator{\Diam}{diam}
\DeclareMathOperator{\dist}{dist}
\DeclareMathOperator{\cost}{cost}
\DeclareMathOperator{\mean}{mean}
\DeclareMathOperator{\nnz}{nnz}

\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

\newcommand\wt{\ensuremath{\widetilde}}
\newcommand\wh{\ensuremath{\widehat}}
\newcommand\mbf{\ensuremath{\mathbf}}
\renewcommand\v{\ensuremath{\boldsymbol}}

\newcommand\comment[1]{{\color{blue}\{\emph{Comment}:} #1{\color{blue}\}}}

\newtheorem{lemma}{Lemma}
\newtheorem{claim}{Claim}
\newtheorem{fact}{Fact}
\newtheorem{proposition}{Proposition}
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}
\theoremstyle{remark}
\newtheorem{remark}{Remark}
\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{condition}{Condition}

\newcommand\parens[1]{(#1)}
\renewcommand\norm[1]{\|#1\|} % already defined in commath
\newcommand\braces[1]{\{#1\}}
\newcommand\brackets[1]{[#1]}
\newcommand\ceil[1]{\lceil#1\rceil}
\renewcommand\abs[1]{|#1|} % already defined in commath
\newcommand\ind[1]{\ensuremath{\mathds{1}\{#1\}}}
\newcommand\dotp[1]{\langle #1 \rangle}

\newcommand\Parens[1]{\mleft(#1\mright)}
\newcommand\Norm[1]{\mleft\|#1\mright\|}
\newcommand\Braces[1]{\mleft\{#1\mright\}}
\newcommand\Brackets[1]{\mleft[#1\mright]}
\newcommand\Ceil[1]{\mleft\lceil#1\mright\rceil}
\newcommand\Abs[1]{\mleft|#1\mright|}
\newcommand\Ind[1]{\mathds{1}\mleft\{#1\mright\}}
\newcommand\Dotp[1]{\mleft\langle#1\mright\rangle}

\begin{document}

Let $X_1, X_2, \dotsc, X_n$ be a sequence of real-valued random
variables, where $\cF_i$ is the $\sigma$-field generated by $X_1, X_2,
\dotsc, X_i$.
Assume $\E(X_i|\cF_{i-1}) = 0$, $\abs{X_i} \leq 1$ almost surely, and
$\E(X_i^2|\cF_{i-1}) < \infty$.
Define $V := \sum_{i=1}^n \E(X_i^2|\cF_{i-1})$ and $S := \sum_{i=1}^n
X_i$.

Fix $t>0$.
Our goal is to prove
\[
  \P\Parens{
    |S| \leq O\Parens{ t + \sqrt{V (\ln(\ln(V/|S|)) + t)} }
  }
  \ \geq \ 1 - e^{-t}
  \,.
\]

Define the following events:
\begin{align*}
  E_A & \ := \ \braces{ |S| \leq c_1 t + c_2 V }
  \,, \\
  E_B & \ := \ \braces{ V \leq c_3 t }
  \,.
\end{align*}
\begin{enumerate}
  \item
    We can show using standard methods that $\P(E_A) \geq 1-2e^{-t}$
    for suitable $c_1, c_2 > 0$.

  \item
    If $E_A$ and $E_B$ both hold, then $|S| \leq (c_1 + c_2c_3) t \leq
    c_4 t$ for a suitable value of $c_4 > 0$.

  \item
    Now we shall bound $\P(E_A \wedge \neg E_B \wedge |S| > c_5
    \sqrt{V (\ln(\ln^2(V/(c_6|S|))) + t)})$.
    Using Chernoff's method, we have
    \begin{align*}
      \lefteqn{
        \P\Parens{
          E_A \wedge \neg E_B \wedge
          |S| > c_5 \sqrt{
            V \Parens{
              \ln\Parens{
                \ln^2\frac{V}{c_6|S|}
              } + t
            }
          }
        }
      } \\
      & \ = \
      \P\Parens{
        E_A \wedge \neg E_B \wedge
        \frac{S^2}{c_5^2V}
        > \ln\Parens{\ln^2\frac{V}{c_6|S|}} + t
      }
      \\
      & \ = \
      \P\Parens{
        E_A \wedge \neg E_B \wedge
        \frac{
          \exp\Parens{\frac{S^2}{c_5^2V}}
        }{
          \ln^2\frac{V}{c_6|S|}
        }
        > e^t
      }
      \\
      & \ \leq \
      \E\Parens{
        \ind{E_A \wedge \neg E_B}
        \frac{
          \exp\Parens{\frac{S^2}{c_5^2V}}
        }{
          \ln^2\frac{V}{c_6|S|}
        }
      }
      e^{-t}
      \\
      & \ \dotsb \
      \\
      & \ \leq \
      \int_{-1/e^2}^{1/e^2}
      \E\Parens{
        \ind{E_A \wedge \neg E_B}
        \exp\Parens{ \lambda S - \lambda^2 (e-2) V }
      }
      \frac{\dif\lambda}{\abs{\lambda}\ln^2\abs{\lambda}}
      e^{-t}
      \\
      & \ \leq \
      e^{-t}
      \,,
    \end{align*}
    where the key inequality holds for a suitable choice of $c_5, c_6
    > 0$.

  \item
    Now we conclude that
    \begin{align*}
      \lefteqn{
        \P\Parens{
          |S| >
          c_4 t +
          c_5 \sqrt{
            V \Parens{
              \ln\Parens{
                \ln^2\frac{V}{c_6|S|}
              } + t
            }
          }
        }
      } \\
      & \ \leq \
      \P\Parens{
        E_A \wedge
        \neg E_B \wedge
        |S| >
        c_5 \sqrt{
          V \Parens{
            \ln\Parens{
              \ln^2\frac{V}{c_6|S|}
            } + t
          }
        }
      }
      + \P(\neg E_A)
      \\
      & \ \leq \
      3e^{-t}
      \,.
    \end{align*}

\end{enumerate}

Observe that on the event $E_A \wedge \neg E_B$, we have
\[
  |S|
  \ \leq \
  \Parens{
    \frac{c_1}{c_3} + c_2
  } V
  \ \leq \
  \frac{c_7V}{(1+\delta)e^2}
\]
for a suitable choice of $c_7>0$ and $\delta := (e-1)/(e+1) \approx
0.46212 \in (0,1)$.

The key inequality follows by viewing the integral as an expectation
over the random variable $\Lambda$, which has support on
$\intco{-1/e^2,0} \cup \intoc{0,1/e^2}$ with probability density
$f_\Lambda(t) := 1/(\abs{t}\ln^2\abs{t})$:
\begin{align*}
  \E\Parens{
    \ind{E_A \wedge \neg E_B}
    \exp\Parens{ \Lambda S - \Lambda^2 (e-2) V }
  }
  & \ = \
  \E\Parens{
    \ind{E_A \wedge \neg E_B}
    \E\Parens{
      \exp\Parens{ \Lambda S - \Lambda^2 (e-2) V }
      \mid S,V
    }
  }
  \,.
\end{align*}
The inner conditional expectation, on the event $E_A \wedge \neg E_B$,
can be bounded below as follows:
\begin{align*}
  \lefteqn{
    \E\Parens{
      \exp\Parens{ \Lambda S - \Lambda^2 (e-2) V }
      \mid S,V
    }
  } \\
  & \ = \
  \int_{-1/e^2}^{1/e^2}
  \exp\Parens{ S t - (e-2) V t^2 }
  f_\Lambda(t) \dif{t}
  \\
  & \ = \
  \exp\Parens{\frac{S^2}{2c_7V}}
  \int_{-1/e^2}^{1/e^2}
  \exp\Parens{
    -\frac{S^2}{2c_7V}
    + S t - (e-2) V t^2
  }
  f_\Lambda(t) \dif{t}
  \\
  & \ \geq \
  \exp\Parens{\frac{S^2}{2c_7V}}
  \int_{-1/e^2}^{1/e^2}
  \exp\Parens{
    -\frac{c_7V}{2}
    \Parens{ t - \frac{S}{c_7V} }^2
  }
  f_\Lambda(t) \dif{t}
  \qquad \text{(for $c_7 \geq 2(e-2)$)}
  \\
  & \ \geq \
  \exp\Parens{\frac{S^2}{2c_7V}}
  \int_0^{1/e^2}
  \exp\Parens{
    -\frac{c_7V}{2}
    \Parens{ t - \frac{|S|}{c_7V} }^2
  }
  f_\Lambda(t) \dif{t}
  \qquad \text{(since $f_\Lambda(t) = f_\Lambda(-t)$)}
  \\
  & \ \geq \
  \exp\Parens{\frac{S^2}{2c_7V}}
  \int_{\frac{|S|(1-\delta)}{c_7V}}^{\frac{|S|(1+\delta)}{c_7V}}
  \exp\Parens{
    -\frac{c_7V}{2}
    \Parens{ t - \frac{|S|}{c_7V} }^2
  }
  f_\Lambda(t) \dif{t}
  \qquad \text{(by above observation)}
  \\
  & \ \geq \
  \exp\Parens{\frac{(1-\delta)S^2}{2c_7V}}
  \int_{\frac{|S|(1-\delta)}{c_7V}}^{\frac{|S|(1+\delta)}{c_7V}}
  f_\Lambda(t) \dif{t}
  \\
  & \ = \
  \exp\Parens{\frac{(1-\delta^2)S^2}{2c_7V}}
  \left.
  \Parens{
    -\frac{1}{\ln(t)}
  }
  \right\vert_{\frac{|S|(1-\delta)}{c_7V}}^{\frac{|S|(1+\delta)}{c_7V}}
  \\
  & \ = \
  \exp\Parens{\frac{(1-\delta^2)S^2}{2c_7V}}
  \frac{\ln\frac{1+\delta}{1-\delta}}
  {\ln\Parens{\frac{|S|(1-\delta)}{c_7V}}\ln\Parens{\frac{|S|(1+\delta)}{c_7V}}}
  \\
  & \ \geq \
  \exp\Parens{\frac{(1-\delta^2)S^2}{2c_7V}}
  \frac{\ln\frac{1+\delta}{1-\delta}}
  {\ln^2\Parens{\frac{|S|(1+\delta)}{c_7V}}}
  \\
  & \ = \
  \exp\Parens{\frac{(1-\delta^2)S^2}{2c_7V}}
  \frac{1}{\ln^2\Parens{\frac{|S|(1+\delta)}{c_7V}}}
  \,.
\end{align*}

\end{document}

